(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports=a(22)},18:function(e,t,a){},20:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(6),o=a.n(r),s=(a(18),a(2)),i=a(3),l=a(4),u=a(7),h=a(8),m=a(11),p=a(9),f=a(12),v=a(10),b=a(0),S=function(e){var t=e.value,a=e.onChange,n=e.label,r=e.onSubmit;return c.a.createElement("form",{onSubmit:r},"".concat(n,": "),c.a.createElement("input",{type:"text",value:t,onChange:a,placeholder:n}),c.a.createElement("button",{type:"submit"},c.a.createElement(b.b.Provider,{value:{color:"blue",className:"align-middle"}},c.a.createElement("div",null,c.a.createElement(v.a,{size:"1.4em"})))))},d=function(e){var t=e.onClick,a=e.className,n=void 0===a?"":a,r=e.children;return c.a.createElement("button",{type:"button",className:n,onClick:t},r)},g={width:"40%"},E={width:"30%"},y=function(e){var t=e.list,a=e.onDismiss;return c.a.createElement("div",{className:"table"},t.map(function(e){return c.a.createElement("div",{key:e.objectID,className:"table-row"},c.a.createElement("span",{style:g},c.a.createElement("a",{href:e.url,target:"_blank"},e.title)),c.a.createElement("span",{style:E},e.author),c.a.createElement("span",{style:{width:"10%"}},"".concat(e.points," pts")),c.a.createElement("span",{style:{width:"10%"}},c.a.createElement(d,{onClick:function(){return a(e.objectID)},className:"button-inline"},"Dismiss")))}))},w=(a(20),c.a.createContext(null),"https://hn.algolia.com/api/v1"),T="/search",j="query=",k="page=",C="hitsPerPage=",O="technology",D=100,N=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).fetchSearchTopStories=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;console.log("... calling HackerNews API"),fetch("".concat(w).concat(T,"?").concat(j).concat(e,"&").concat(k).concat(t,"&").concat(C).concat(D)).then(function(e){return e.json()}).then(function(e){return a.setSearchTopStories(e)}).catch(function(e){return e})},a.setSearchTopStories=function(e){var t=e.hits,n=e.page,c=a.state,r=c.searchKey,o=c.results,u=o&&o[r]?o[r.hits]:[],h=[].concat(Object(l.a)(u),Object(l.a)(t));console.log(e),a.setState({results:Object(i.a)({},o,Object(s.a)({},r,{hits:h,page:n}))})},a.needsToSearchTopStories=function(e){return!a.state.results[e]},a.onDismiss=function(e){var t=a.state,n=t.searchKey,c=t.results,r=c[n],o=r.hits,l=r.page,u=o.filter(function(t){return t.objectID!==e});a.setState({results:Object(i.a)({},c,Object(s.a)({},n,{hits:u,page:l}))})},a.onSearchChange=function(e){a.setState({searchTerm:e.target.value})},a.onSearchSubmit=function(e){var t=a.state.searchTerm;a.setState({searchKey:t}),a.needsToSearchTopStories(t)&&a.fetchSearchTopStories(t),e.preventDefault()},a.state={results:null,searchKey:"",searchTerm:O},console.log("STATE",a.state),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.searchTerm;this.setState({searchKey:e}),this.fetchSearchTopStories(e)}},{key:"render",value:function(){var e=this,t=this.state,a=t.results,n=t.searchTerm,r=t.searchKey,o=a&&a[r]&&a[r].page||0,s=a&&a[r]&&a[r].hits||[];return c.a.createElement("div",{className:"page"},c.a.createElement("div",{className:"interactions"},c.a.createElement(S,{value:n,onChange:this.onSearchChange,onSubmit:this.onSearchSubmit,label:"Search"})),c.a.createElement(y,{list:s,onDismiss:this.onDismiss}),a&&c.a.createElement("div",{className:"interactions"},c.a.createElement(d,{onClick:function(){return e.fetchSearchTopStories(r,o+1)}},"More")))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=document.getElementById("root");o.a.render(c.a.createElement(N,null),K),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,2,1]]]);
//# sourceMappingURL=main.f7aabbbc.chunk.js.map